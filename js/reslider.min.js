/*!
 * Reslider v0.1.1
 * 
 * A responsive image slider with bootstrap front end framework.
 * Has optimized for sm, md, lg screen resolutions. Currently unavailable 
 * to xs screen resolution. And has only implemented for the "Fade In" 
 * transition effect.
 * 
 * Author: TMSGR Warnasooriya
 *
 * Released under GNU GENERAL PUBLIC LICENSE Version 2, June 1991
 *
 * Date: 2015-12-06 5:36 AM (GMT Time)
 */
(function($){

	$.fn.reslider = function(opt){

		//initializes default values for the params
		var defaults = {
			duration: 1000,						// Integer: Time between slide transitions, in milliseconds
			slideIn: "fadeIn",					// String: Slide transition animation type
			textColor: "#fff",					// Hex/RGB/String : Color for texts in slides
			textBgColor: "rgba(255,0,0,0.6)"	// Hex/RGB/String : Color for texts backgrounds in slides
		}

		//selects slides from DOM 
		var slides = $(this).children();
		
		//holds wrapper elemnt
		var sliderWrapper = $(this).parent();
		
		//holds slides length for the loop through cycle
		var slidesLength = slides.length;

		//overrides default params with user params
		var options = $.extend({}, defaults, opt);

		//sets loop count start value
		var loopCount = 0;
		
		//holds time out values for multiple calls
		var runTimeOut;

		//runs individual slider
		$(this).each(function(){

			run();

		});

		function run(){
			setParentHeight();
			
			if(options.slideIn == "fadeIn"){

				fadeOutCurrentSlide(slides[loopCount]);

				loopCount++;

				loopCount = (loopCount < slidesLength) ? loopCount : 0;
				
				fadeInNextSlide(slides[loopCount]);
			}

			runTimeOut = setTimeout(run, options.duration);
		}

		function fadeOutCurrentSlide(elem){
			$(elem).children("div").css('right', '-50%');
			$(elem).children("div").fadeOut(1000);
			$(elem).fadeOut(1000);
		}

		function fadeInNextSlide(elem){
			$(slides[loopCount]).children("div").css('color', options.textColor);
			$(slides[loopCount]).children("div").css('background-color', options.textBgColor);
			$(slides[loopCount]).fadeIn(1000);
			$(slides[loopCount]).children("div").fadeIn(1000);
			$(slides[loopCount]).children("div").css('right', '10%');
		}
	
		$("#sld-division li").click(function(){
			
			loopCount = $(this).index() - 1;

			for(j = 0; j < slidesLength; j++){

				if(slides[j].style.display == 'list-item'){
					currentSldIndex = j;
				}
			}

			fadeOutCurrentSlide(slides[currentSldIndex]);

			loopCount = (loopCount == -1) ? 2 : loopCount;

			fadeInNextSlide(slides[loopCount]);

			clearTimeout(runTimeOut);

			run();
		});
	}
})(jQuery);